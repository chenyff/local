<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>三级联动</title>
</head>
<body>
    <script src="address.js"></script>
    <script>
        (function(){
            //第一步，首先把省，市，县弄好，循环创建三个select，给每一个一个id，然后添加到body里面
            for(var i=0;i<3;i++){
                var newselect = document.createElement("select");
                newselect.id = "sel"+(i+1);
                document.body.appendChild(newselect);
            }
            //第二步，渲染省，也就是data数组里每一个对象里面的name值，
            //需要把数组里面的每一个省都循环添加到第一个select里面
            for(var i = 0;i<data.length;i++){
                console.log(data[i]);
                var newoption = document.createElement("option");
                newoption.innerHTML = data[i].name;
                sel1.appendChild(newoption);
            }
            //第三步，渲染市，也就是data数组里每一个City里面的name，
            //但是因为当前是第一个北京，所以只需要渲染第一条里面的name就好
            for(var i=0;i< data[0].city.length;i++){
                var newoption = document.createElement("option");
                newoption.innerHTML = data[0].city[0].name;
                sel2.appendChild(newoption);
            }
            //第四步，渲染区，也就是data数组里的每一个area，
            //但是因为当前是北京，所以只需要渲染北京的就可以
            for (var i = 0; i < data[0].city[0].area.length; i++) {
                var newoption = document.createElement("option");
                newoption.innerHTML = data[0].city[0].area[i];
                sel3.appendChild(newoption);
            }
            //第五部，给省添加change事件
            sel1.onchange = function(){
                //this.selectedIndex代表当前选中的索引
                sel2.innerHTML = "";
                for(var i=0;i<data[this.selectedIndex].city.length;i++){
                    var newoption = document.createElement("option");
                    newoption.innerHTML = data[this.selectedIndex].city[i].name;
                    sel2.appendChild(newoption);
                }
            }
            //第六步，给市添加change事件
            sel2.onchange = function () {
                //this.selectedIndex代表当前选中的索引
               sel3.innerHTML = "";
               for(var i=0;i<data[sel1.selectedIndex].city[this.selectedIndex].area.length;i++){
                   var newoption = document.createElement("option");
                   newoption.innerHTML = data[sel1.selectedIndex].city[this.selectedIndex].area[i];
                   sel3.appendChild(newoption);
               }
            }

            
        })()
    </script>
</body>
</html>