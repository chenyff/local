<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>todos </title>
	<style type="text/css">
		.todos{
			width: 300px;
			margin: 0 auto;
			background: #666;
		}
		.todos li{
			list-style: none;
			padding-bottom: 5px;
		}
		.del-btn{
			float: right;
			display: none;
			cursor: pointer;
			padding-right: 15px;
		}
		.todolist li:hover .del-btn{
			display: block;
		}
		input{
			vertical-align: bottom;
		}
	</style>
</head>
<body>
	<div id="todos" class="todos">
	    <h1>我的列表</h1>
		<div>
			<input v-model="ness" type="text"  v-on:keyup.enter='save' placeholder="你想嘎哈。" />
		</div>
		<ul class="todolist">
			<li v-for="todo in todos">
			    <input type="checkbox" v-model="this.completed" />
				{{todo.text}}
				<span class="del-btn" v-on:click="removeTodo(todo)">&times;</span>
			</li>
		</ul>
		<hr/>
		<div class="tool-bar">
			<span>还剩{{todos.length}}项</span>
		</div>
	</div>
	<script type="text/javascript" src="vue.js"></script>
	<script type="text/javascript">
		var STORAGE_KEY = 'todos-chenyufei';
		var todoStorage={
			save:function(todos){
				localStorage.setItem(STORAGE_KEY,JSON.stringify(todos));
			},
			fetch:function () {
			    var todos = JSON.parse(localStorage.getItem('todos-chenyufei') || '[]');
			    return todos;
			}
		}
		var app = new Vue({
			el:"#todos",
			data:{
				ness:'',
				todos: todoStorage.fetch()
			},
			watch:{
				todos:function(todos){
					todoStorage.save(todos);
				}
			},
			methods:{
				save:function(){
					this.todos.push({
						text:this.ness,
						completed:false
					});
					this.ness = '';
				},
				removeTodo:function(todo){
					this.todos.splice(this.todos.indexOf(todo),1);
				}
			}
		})
	</script>
</body>
</html>